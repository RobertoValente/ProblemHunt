<% for(let i = 0; i < data.length; i++) { %>
    <div id="cardProblem" class="card bg-base-100 rounded-2xl w-full border mb-4">
        <input class="identifier" type="text" value="<%= data[i]['$id'] %>" disabled hidden>
        <div class="card-body p-4">
            <span class="text-left break-words"><kbd class="kbd kbd-sm">âžœ</kbd> <%= data[i].description %></span>
            <div class="card-actions">
                <% if(data[i].bstSite) { %>
                    <!-- Boost Button -->
                    <button onclick="mdlBoost.showModal();" class="btn btn-square bg-base-100 border boostBtn">
                        <svg title="<%= lng.cardAltBstIcon %>" xmlns="http://www.w3.org/2000/svg" fill="yellow" class="swap-on h-6 w-6" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z" /></svg>
                    </button>
                <% } %>

                <!-- Like Button -->
                <button class="btn btn-square bg-base-100 border grow likeBtn">
                    <svg title="<%= lng.cardAltLikeIcon %>" xmlns="http://www.w3.org/2000/svg" fill="none" class="swap-on h-6 w-6" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" /></svg>
                    <span class="hidden min-[330px]:contents font-bold"><%= lng.cardTxtLike %></span>
                </button>

                <!-- Actions Button -->
                <div class="dropdown dropdown-end">
                    <div title="<%= lng.cardAltMenuButton %>" tabindex="0" role="button" class="btn btn-square bg-base-100 border">
                        <svg title="<%= lng.cardAltMenuIcon %>" xmlns="http://www.w3.org/2000/svg" fill="none" class="swap-on h-6 w-6" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z" /></svg>
                    </div>
                    <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-40 p-2 shadow-md border">
                        <li><button onclick="mdlShare<%=i%>.showModal();" type="share" class="shareBtn"  title="<%= lng.cardAltShareButton %>">
                            <svg title="<%= lng.cardAltShareIcon %>" xmlns="http://www.w3.org/2000/svg" fill="none" class="swap-on h-5 w-5" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z" /></svg>
                            <%= lng.cardTxtShare %>
                        </button></li>
                        <% if(data[i].emailCreator) { %>
                            <li><button onclick="mdlReply<%=i%>.showModal();" class="replyBtn" title="<%= lng.cardAltReplyButton %>">
                                <svg title="<%= lng.cardAltReplyIcon %>" xmlns="http://www.w3.org/2000/svg" fill="none" class="swap-on h-5 w-5" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3" /></svg>
                                <%= lng.cardTxtReply %>
                            </button></li>
                        <% } %>
                        <li><a class="reportBtn" title="<%= lng.cardAltReportButton %>">
                            <svg title="<%= lng.cardAltReportIcon %>" xmlns="http://www.w3.org/2000/svg" fill="none" class="swap-on h-5 w-5" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" /></svg>
                            <%= lng.cardTxtReport %>
                        </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Share: -->
    <dialog id="mdlShare<%=i%>" class="modal modal-bottom sm:modal-middle">
        <div class="modal-box">
            <h2 class="text-2xl font-bold text-left"><%= lng.modalShareTitle %></h3>
            <div class="py-2 text-base text-left">
                <%= lng.modalShareDescription %>
            </div>
            <div class="modal-action w-full text-center">
                <form class="w-full" id="copyForm" action="javascript:navigator.clipboard.writeText('<%= data[i].description %>');alert('<%= lng.modalShareTxtCopy %>');">
                    <div class="join w-full">
                        <input type="text" value="data[i].description" disabled hidden>
                        <button id="copyProblem" type="submit" class="btn join-item btn-success btn-outline text-base border-2 font-bold w-full !rounded-lg"><%= lng.modalShareBtnCopy %></button>
                    </div>
                </form>
                <form method="dialog">
                    <button class="btn text-base">
                        <svg title="<%= lng.modalShareAltClose %>" xmlns="http://www.w3.org/2000/svg" fill="none" class="h-5 w-5" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5" ><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>
                    </button>
                </form>
            </div>
        </div>
    </dialog>
    
    <!-- Modal Reply: -->
    <dialog id="mdlReply<%=i%>" class="modal modal-bottom sm:modal-middle">
        <div class="modal-box">
            <h2 class="text-2xl font-bold text-left"><%= lng.mdlReplyTitle %></h3>
            <div class="py-2 text-base">
                <form id="replyForm<%=i%>" method="POST" action="/cards/reply">
                    <input name="identifier" type="text" value="<%= data[i]['$id'] %>" hidden>
                    <label class="form-control w-full">
                        <div class="label">
                            <span class="label-text"><span class="text-error">*</span><%= lng.mdlReplyTxtEmail %></span>
                        </div>
                        <input name="replyEmail" type="email" placeholder="<%= lng.mdlReplyExampleEmail %>" class="input input-bordered w-full" required />
                    </label>
                    <br>
                    <label class="form-control">
                        <div class="label">
                            <span class="label-text"><span class="text-error">*</span><%= lng.mdlReplyTxtMsg %></span>
                        </div>
                        <textarea name="replyMessage" class="textarea textarea-bordered h-24 resize-y max-h-24" placeholder="<%= lng.mdlReplyTxtExample %>" required></textarea>
                    </label>
                </form>
            </div>
            <div class="modal-action w-full text-center">
                <div class="join w-full">
                    <button id="submitReplyForm" class="btn join-item btn-success btn-outline text-base border-2 font-bold w-full" type="submit" form="replyForm<%=i%>"><%= lng.mdlReplyTxtSend %></button>
                </div>
                <form method="dialog">
                    <button class="btn text-base">
                        <svg title="<%= lng.mdlReplyAltClose %>" xmlns="http://www.w3.org/2000/svg" fill="none" class="h-5 w-5" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5" ><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>
                    </button>
                </form>
            </div>
        </div>
    </dialog>
<% } %>

<%- include('cardScript') %>

<!-- Modal Boost: -->
<dialog id="mdlBoost" class="modal modal-bottom sm:modal-middle">
    <div class="modal-box">
        <h2 class="text-2xl font-bold text-left"><%= lng.modalBoostTitle %></h3>
        <div class="py-2 text-base text-left">
            <%= lng.modalBoostDescription %>
        </div>
        <div class="modal-action w-full text-center">
            <form method="dialog">
                <button class="btn text-base">
                    <svg title="<%= lng.modalBoostAltClose %>" xmlns="http://www.w3.org/2000/svg" fill="none" class="h-5 w-5" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5" ><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>
                </button>
            </form>
        </div>
    </div>
</dialog>